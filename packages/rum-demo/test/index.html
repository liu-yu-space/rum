<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <title>RUM 测试页面</title>
  </head>
  <body>
    <h1>RUM 请求与上传测试</h1>
    <button id="requestBtn">发送请求</button>
    <p>点击按钮发送请求，查看控制台输出</p>
    <input type="file" id="fileInput" />
    <button id="uploadBtn">上传</button>
    <script type="module">
      import { worker } from "../mocks/browser.js";
      worker.start();
      import { RequestManager } from "rum/index.ts";

      const uploadManager = new RequestManager();

      document.getElementById("requestBtn").onclick = async () => {
        console.log("请求按钮被点击了");
        uploadManager.add(async () => {
          const res = await fetch("/data", {
            method: "GET",
          });
          const data = await res.json();
          console.log(data);
        });
      };

      document.getElementById("uploadBtn").onclick = async () => {
        console.log("上传按钮被点击了");
      };
    </script>
  </body>
</html>
